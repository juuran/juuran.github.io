import{tila}from"../controller/main.js";import{cy,Cykupuu}from"../controller/cykupuu.js";import{SuhdeLiitos}from"./suhdeliitos.js";import*as Util from"../etc/util.js";import{asetukset}from"../controller/main.js";class Henkilo{id;etunimet;sukunimet;vanhempiSuhteet;pariSuhteet;initialXPosition;initialYPosition;syntAika;kuolAika;syntPaikka;paaAsPaikka;aidinkieli;heimo;vapaaTieto;constructor(i,t,e,n,a,s=null,h=null,u=null,o=null,k="",l="",m="",r="",p=""){this.id=i,this.etunimet=t,this.sukunimet=e,this.vanhempiSuhteet=n,this.pariSuhteet=a,this.initialXPosition=s,this.initialYPosition=h,this.syntAika=u,this.kuolAika=o,this.syntPaikka=k,this.paaAsPaikka=l,this.aidinkieli=m,this.heimo=r,this.vapaaTieto=p}onkoSama(i,t,e,n,a,s,h,u,o){try{return this.etunimet===i&&this.sukunimet===t&&Util.dateToInputDateString(this.syntAika)===Util.dateToInputDateString(e)&&Util.dateToInputDateString(this.kuolAika)===Util.dateToInputDateString(n)&&this.syntPaikka===a&&this.paaAsPaikka===s&&this.aidinkieli===h&&this.heimo===u&&this.vapaaTieto===o}catch(i){return!1}}toString(){let i="",t="";if(this.vanhempiSuhteet.length>=1)for(let t=0;t<this.vanhempiSuhteet.length;t++){const e=this.vanhempiSuhteet[t];i+=tila.naytaTila().suhteet.get(e.getSuhdeId()).toString(),i+=t===this.vanhempiSuhteet.length-1?"":", "}if(this.pariSuhteet.length>=1)for(let i=0;i<this.pariSuhteet.length;i++){const e=this.pariSuhteet[i];t+=tila.naytaTila().suhteet.get(e.getSuhdeId()).toString(),t+=i===this.pariSuhteet.length-1?"":", "}return`Nimi: ${this.etunimet} ${this.sukunimet}. VanhempiSuhteet: (${i}). PariSuhteet: (${t}).`}getNakyvaNimi(){return this.etunimet.length>0?this.etunimet:this.sukunimet.length>0?this.sukunimet:"(Tuntematon)"}getTaydetTiedot(){const i=asetukset.naytaLaajatTiedot()?Cykupuu.VAPAA_KENTTA_TAYSI_PITUUS:Cykupuu.VAPAA_KENTTA_LYHYT_PITUUS;if(this.etunimet.length+this.sukunimet.length>0){const t=this.sukunimet?`\n${this.sukunimet}`:"",e=this.syntAika?`\n✶: ${Util.dateToFIString(this.syntAika)}`:"",n=this.kuolAika?`\n†: ${Util.dateToFIString(this.kuolAika)}`:"";let a="";if(this.vapaaTieto&&(a=this.vapaaTieto.length>i?'\n\n"'+this.vapaaTieto.substring(0,i-6)+' [...]"':`\n\n"${this.vapaaTieto}"`),asetukset.naytaLaajatTiedot()){const i=this.syntPaikka?`\nSyntymäpaikka: ${this.syntPaikka}`:"",s=this.paaAsPaikka?`\nPääasiallinen paikkakunta: ${this.paaAsPaikka}`:"",h=this.aidinkieli?`\nÄidinkieli: ${this.aidinkieli}`:"",u=this.heimo?`\nHeimo: ${this.heimo}`:"";return`${this.etunimet}${t}${e}${n}${i}${s}${h}${u}${a}`}return`${this.etunimet}${t}${e}${n}${a}`}return"(syötä nimi näyttääksesi\nmuut tiedot)"}getXPosition(){return cy.getElementById(this.id).position().x}getYPosition(){return cy.getElementById(this.id).position().y}static reviver(i,t){return""===i?t:t&&"object"==typeof t&&"id"in t&&"etunimet"in t&&"sukunimet"in t&&"vanhempiSuhteet"in t&&"pariSuhteet"in t&&"syntAika"in t&&"kuolAika"in t&&"syntPaikka"in t&&"paaAsPaikka"in t&&"aidinkieli"in t&&"vapaaTieto"in t?new Henkilo(t.id,t.etunimet,t.sukunimet,t.vanhempiSuhteet,t.pariSuhteet,t.xPosition,t.yPosition,t.syntAika?new Date(t.syntAika):null,t.kuolAika?new Date(t.kuolAika):null,t.syntPaikka,t.paaAsPaikka,t.aidinkieli,t.heimo,t.vapaaTieto):t&&"object"==typeof t&&"id"in t&&"etunimet"in t&&"sukunimet"in t&&"vanhempiSuhteet"in t&&"pariSuhteet"in t?new Henkilo(t.id,t.etunimet,t.sukunimet,t.vanhempiSuhteet,t.pariSuhteet,t.xPosition,t.yPosition):t&&"object"==typeof t&&"id"in t&&"onkoBiologinen"in t?new SuhdeLiitos(t.id.henkiloId,t.id.suhdeId,t.onkoBiologinen):t&&"object"==typeof t&&"id"in t?new SuhdeLiitos(t.id.henkiloId,t.id.suhdeId):t}toJSON(){return{id:this.id,etunimet:this.etunimet,sukunimet:this.sukunimet,vanhempiSuhteet:this.vanhempiSuhteet,pariSuhteet:this.pariSuhteet,syntAika:this.syntAika?this.syntAika.toJSON():null,kuolAika:this.kuolAika?this.kuolAika.toJSON():null,syntPaikka:this.syntPaikka,paaAsPaikka:this.paaAsPaikka,aidinkieli:this.aidinkieli,vapaaTieto:this.vapaaTieto,xPosition:this.getXPosition(),yPosition:this.getYPosition()}}}export{Henkilo};